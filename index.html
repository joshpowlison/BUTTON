<!DOCTYPE HTML>
<html>
<head>
	<title>BUTTON</title>
	<style>
		body{
			margin:0;
			padding:0;
		}
	
		#button{
			background-color:red;
			border-radius:100%;
			
			width:10vw;
			height:10vw;
			margin:auto;
		}
		
		#number{
			text-align:center;
		}
	</style>
</head>
<body>
	<div id="number">0</div> <div id="button"></div>
	<script>
		const BUTTON		= document.getElementById('button');
		const NUMBER		= document.getElementById('number');
		
		// Bitmasks for all possible presses
		const MOUSE			= 1 << 0;
		const TOUCH0		= 1 << 1;
		const TOUCH1		= 1 << 2;
		const TOUCH2		= 1 << 3;
		const TOUCH3		= 1 << 4;
		const TOUCH4		= 1 << 5;
		const TOUCH5		= 1 << 6;
		const TOUCH6		= 1 << 7;
		const TOUCH7		= 1 << 8;
		const TOUCH8		= 1 << 9;
		const TOUCH9		= 1 << 10;
		
		var number			= 0;
		var windowPresses	= 0;
		var buttonPresses	= 0;
	
		// |= adds to the bitmask
		// ^= toggles from the bitmask
		// &= ~PROP always removes from the bitmask
		// & checks if true
	
		function incrementNumber(event){
			number++;
			NUMBER.innerHTML = number;
		}
		/*
		function press(event){
			// Touches (fingers, stylus)
			if(event.touches){
				
			}
			// Regular mouse clicks
			else {
				windowPresses |= MOUSE;
			}
		}
		
		function move(event){
			// If the window is being pressed at all
			if(windowPresses === 0){
				// Touches (fingers, stylus)
				if(event.touches){
					
				}
				// Regular mouse clicks
				else {
					
				}
			}
		}
		
		function unpress(event){
			// Touches (fingers, stylus)
			if(event.touches){
				
			}
			// Regular mouse clicks
			else {
				buttonPresses &= ~MOUSE;
			}
			
			// See if nothing is pressing the button anymore
			if(buttonPresses === 0) incrementNumber();
		}*/
		
		window.addEventListener('mousedown',function(event){
			// Press on the window
			windowPresses |= MOUSE;
			// Press on the button if needbe
			if(event.target === BUTTON) buttonPresses |= MOUSE;
			
			console.log(windowPresses,buttonPresses);
		});
		
		window.addEventListener('mouseup',function(event){
			// If the mouse is pressing the button, increment the number
			if(buttonPresses){
				incrementNumber();
			}
		
			// Remove all traces of presses
			windowPresses &= ~MOUSE;
			buttonPresses &= ~MOUSE;
			
			console.log(windowPresses,buttonPresses);
		});
		
		window.addEventListener('mousemove',function(event){
			// If the window is being pressed on
			if(windowPresses){
				// If the button is being moved onto with a pressed button, add it to the tracked presses
				if(event.target === BUTTON && !buttonPresses){
					buttonPresses |= MOUSE;
				}
				// If the button is being moved off of, track the press
				else if(event.target !== BUTTON && buttonPresses){
					incrementNumber();
					buttonPresses &= ~MOUSE;
				}
			}
			
			console.log(windowPresses,buttonPresses);
		});
	</script>
</body>
</html>